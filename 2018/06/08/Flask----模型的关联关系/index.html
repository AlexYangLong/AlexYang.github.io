<!DOCTYPE html>
<html>
<head>
    

    

    



    <meta charset="utf-8">
    
    
    
    
    <title>Flask -- 模型的关联关系 | AlexYang&#39;s World | AlexYang的博客世界</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <meta name="theme-color" content="#3F51B5">
    
    
    <meta name="keywords" content="Python,Flask">
    <meta name="description" content="Flask – 模型的关联关系一对多学生模型： 1234567class Student(db.Model):	__tablename__ = &apos;student&apos;	    s_id = db.Column(db.Integer, primary_key=True, autoincrement=True)    s_name = db.Column(db.String(20), unique=Tru">
<meta name="keywords" content="Python,Flask">
<meta property="og:type" content="article">
<meta property="og:title" content="Flask -- 模型的关联关系">
<meta property="og:url" content="http://alexyanglong.github.io/2018/06/08/Flask----模型的关联关系/index.html">
<meta property="og:site_name" content="AlexYang&#39;s World">
<meta property="og:description" content="Flask – 模型的关联关系一对多学生模型： 1234567class Student(db.Model):	__tablename__ = &apos;student&apos;	    s_id = db.Column(db.Integer, primary_key=True, autoincrement=True)    s_name = db.Column(db.String(20), unique=Tru">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2018-06-25T11:30:30.701Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Flask -- 模型的关联关系">
<meta name="twitter:description" content="Flask – 模型的关联关系一对多学生模型： 1234567class Student(db.Model):	__tablename__ = &apos;student&apos;	    s_id = db.Column(db.Integer, primary_key=True, autoincrement=True)    s_name = db.Column(db.String(20), unique=Tru">
    
        <link rel="alternate" type="application/atom+xml" title="AlexYang&#39;s World" href="/atom.xml">
    
    <link rel="shortcut icon" href="/img/avatar.jpg">
    <link rel="stylesheet" href="//unpkg.com/hexo-theme-material-indigo@latest/css/style.css">
    <script>window.lazyScripts=[]</script>

    <!-- custom head -->
    

</head>

<body>
    <div id="loading" class="active"></div>

    <aside id="menu" class="hide" >
  <div class="inner flex-row-vertical">
    <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menu-off">
        <i class="icon icon-lg icon-close"></i>
    </a>
    <div class="brand-wrap" style="background-image:url(/img/brand.jpg)">
      <div class="brand">
        <a href="/" class="avatar waves-effect waves-circle waves-light">
          <img src="/img/avatar.jpg">
        </a>
        <hgroup class="introduce">
          <h5 class="nickname">AlexYang</h5>
          <a href="mailto:120664469@qq.com" title="120664469@qq.com" class="mail">120664469@qq.com</a>
        </hgroup>
      </div>
    </div>
    <div class="scroll-wrap flex-col">
      <ul class="nav">
        
            <li class="waves-block waves-effect">
              <a href="/"  >
                <i class="icon icon-lg icon-home"></i>
                主页
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/categories"  >
                <i class="icon icon-lg icon-th-list"></i>
                分类
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/archives"  >
                <i class="icon icon-lg icon-archives"></i>
                归档
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/tags"  >
                <i class="icon icon-lg icon-tags"></i>
                标签云
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="/about"  >
                <i class="icon icon-lg icon-user"></i>
                关于
              </a>
            </li>
        
            <li class="waves-block waves-effect">
              <a href="https://github.com/AlexYangLong" target="_blank" >
                <i class="icon icon-lg icon-github"></i>
                Github
              </a>
            </li>
        
      </ul>
    </div>
  </div>
</aside>

    <main id="main">
        <header class="top-header" id="header">
    <div class="flex-row">
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light on" id="menu-toggle">
          <i class="icon icon-lg icon-navicon"></i>
        </a>
        <div class="flex-col header-title ellipsis">Flask -- 模型的关联关系</div>
        
        <div class="search-wrap" id="search-wrap">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="back">
                <i class="icon icon-lg icon-chevron-left"></i>
            </a>
            <input type="text" id="key" class="search-input" autocomplete="off" placeholder="输入感兴趣的关键字">
            <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="search">
                <i class="icon icon-lg icon-search"></i>
            </a>
        </div>
        
        
        <a href="javascript:;" class="header-icon waves-effect waves-circle waves-light" id="menuShare">
            <i class="icon icon-lg icon-share-alt"></i>
        </a>
        
    </div>
</header>
<header class="content-header post-header">

    <div class="container fade-scale">
        <h1 class="title">Flask -- 模型的关联关系</h1>
        <h5 class="subtitle">
            
                <time datetime="2018-06-07T16:00:00.000Z" itemprop="datePublished" class="page-time">
  2018-06-08
</time>


	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Flask/">Flask</a></li></ul>

            
        </h5>
    </div>

    


</header>


<div class="container body-wrap">
    
    <aside class="post-widget">
        <nav class="post-toc-wrap post-toc-shrink" id="post-toc">
            <h4>TOC</h4>
            <ol class="post-toc"><li class="post-toc-item post-toc-level-1"><a class="post-toc-link" href="#Flask-–-模型的关联关系"><span class="post-toc-number">1.</span> <span class="post-toc-text">Flask – 模型的关联关系</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#一对多"><span class="post-toc-number">1.1.</span> <span class="post-toc-text">一对多</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#多对多"><span class="post-toc-number">1.2.</span> <span class="post-toc-text">多对多</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#添加学生和课程之间的关系"><span class="post-toc-number">1.2.1.</span> <span class="post-toc-text">添加学生和课程之间的关系</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#删除学生和课程之间的关系"><span class="post-toc-number">1.2.2.</span> <span class="post-toc-text">删除学生和课程之间的关系</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#通过课程查询学生的信息"><span class="post-toc-number">1.2.3.</span> <span class="post-toc-text">通过课程查询学生的信息</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#通过学生去查询课程的信息"><span class="post-toc-number">1.2.4.</span> <span class="post-toc-text">通过学生去查询课程的信息</span></a></li></ol></li></ol></li></ol>
        </nav>
    </aside>


<article id="post-Flask----模型的关联关系"
  class="post-article article-type-post fade" itemprop="blogPost">

    <div class="post-card">
        <h1 class="post-card-title">Flask -- 模型的关联关系</h1>
        <div class="post-meta">
            <time class="post-time" title="2018-06-08 00:00:00" datetime="2018-06-07T16:00:00.000Z"  itemprop="datePublished">2018-06-08</time>

            
	<ul class="article-category-list"><li class="article-category-list-item"><a class="article-category-list-link" href="/categories/Flask/">Flask</a></li></ul>



            
<span id="busuanzi_container_page_pv" title="文章总阅读量" style='display:none'>
    <i class="icon icon-eye icon-pr"></i><span id="busuanzi_value_page_pv"></span>
</span>


        </div>
        <div class="post-content" id="post-content" itemprop="postContent">
            <h1 id="Flask-–-模型的关联关系"><a href="#Flask-–-模型的关联关系" class="headerlink" title="Flask – 模型的关联关系"></a>Flask – 模型的关联关系</h1><h2 id="一对多"><a href="#一对多" class="headerlink" title="一对多"></a>一对多</h2><p>学生模型：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span><span class="params">(db.Model)</span>:</span></span><br><span class="line">	__tablename__ = <span class="string">'student'</span></span><br><span class="line">	</span><br><span class="line">    s_id = db.Column(db.Integer, primary_key=<span class="keyword">True</span>, autoincrement=<span class="keyword">True</span>)</span><br><span class="line">    s_name = db.Column(db.String(<span class="number">20</span>), unique=<span class="keyword">True</span>)</span><br><span class="line">    s_age = db.Column(db.Integer, default=<span class="number">18</span>)</span><br><span class="line">    s_g = db.Column(db.Integer, db.ForeignKey(<span class="string">'grade.g_id'</span>), nullable=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<p>班级模型：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Grade</span><span class="params">(db.Model)</span>:</span></span><br><span class="line"> 	__tablename__ = <span class="string">'grade'</span></span><br><span class="line"> 	</span><br><span class="line">    g_id = db.Column(db.Integer, primary_key=<span class="keyword">True</span>, autoincrement=<span class="keyword">True</span>)</span><br><span class="line">    g_name = db.Column(db.String(<span class="number">10</span>), unique=<span class="keyword">True</span>)</span><br><span class="line">    g_desc = db.Column(db.String(<span class="number">100</span>), nullable=<span class="keyword">True</span>)</span><br><span class="line">    g_time = db.Column(db.Date, default=datetime.now)</span><br><span class="line">    students = db.relationship(<span class="string">'Student'</span>, backref=<span class="string">'grade'</span>, lazy=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>
<p>官网解释有如下几个lazy的参数：</p>
<p>lazy 决定了 SQLAlchemy 什么时候从数据库中加载数据:，有如下四个值:</p>
<p><strong>select</strong>/True: (which is the default) means that SQLAlchemy will load the data as necessary in one go using a standard select statement.</p>
<p><strong>joined</strong>/False: tells SQLAlchemy to load the relationship in the same query as the parent using a JOIN statement.</p>
<p><strong>subquery</strong>: works like ‘joined’ but instead SQLAlchemy will use a subquery.</p>
<p><strong>dynamic</strong>: is special and useful if you have many items. Instead of loading the items SQLAlchemy will return another query object which you can further refine before loading the items. This is usually what you want if you expect more than a handful of items for this relationship</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select就是访问到属性的时候，就会全部加载该属性的数据。</span><br><span class="line">joined则是在对关联的两个表进行join操作，从而获取到所有相关的对象。</span><br><span class="line">dynamic则不一样，在访问属性的时候，并没有在内存中加载数据，而是返回一个query对象, 需要执行相应方法才可以获取对象，</span><br></pre></td></tr></table></figure>
<p>通过班级查询学生信息：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@grade.route('/selectstubygrade/&lt;int:id&gt;/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">select_stu_by_grade</span><span class="params">(id)</span>:</span></span><br><span class="line">    grade = Grade.query.get(id)</span><br><span class="line">	<span class="comment"># 通过班级对象.定义的relationship变量去获取学生的信息</span></span><br><span class="line">    stus = grade.students</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'grade_student.html'</span>,</span><br><span class="line">                            stus=stus,</span><br><span class="line">                            grade=grade</span><br><span class="line">                            )</span><br></pre></td></tr></table></figure>
<p>通过学生信息查询班级信息：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@stu.route('/selectgradebystu/&lt;int:id&gt;/')</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">select_grade_by_stu</span><span class="params">(id)</span>:</span></span><br><span class="line">    stu = Student.query.get(id)</span><br><span class="line"> 	<span class="comment"># 通过学生对象.定义的backref参数去获取班级的信息</span></span><br><span class="line">    grade = stu.grade</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">return</span> render_template(<span class="string">'student_grade.html'</span>,</span><br><span class="line">                            grade=grade,</span><br><span class="line">                            stu=stu)</span><br></pre></td></tr></table></figure>
<p>注意：表的外键由db.ForeignKey指定，传入的参数是表的字段。db.relationship它声明的属性不作为表字段，第一个参数是关联类的名字，backref是一个反向身份的代理,相当于在Student类中添加了grade的属性。例如，有Grade实例dept和Student实例grade。dept.students.count()将会返回学院学生人数；stu.grade.first()将会返回学生的学院信息的Grade类实例。一般来讲db.relationship()会放在一这一边。</p>
<h2 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h2><p>创建中间表</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sc = db.Table(<span class="string">'sc'</span>,</span><br><span class="line">    db.Column(<span class="string">'s_id'</span>, db.Integer, db.ForeignKey(<span class="string">'student.s_id'</span>), primary_key=<span class="keyword">True</span>),</span><br><span class="line">    db.Column(<span class="string">'c_id'</span>, db.Integer, db.ForeignKey(<span class="string">'courses.c_id'</span>), primary_key=<span class="keyword">True</span>)</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>创建课程表的模型，Course类</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Course</span><span class="params">(db.Model)</span>:</span></span><br><span class="line"> 	__tablename__ = <span class="string">'courses'</span></span><br><span class="line"> 	</span><br><span class="line">    c_id = db.Column(db.Integer, primary_key=<span class="keyword">True</span>, autoincrement=<span class="keyword">True</span>)</span><br><span class="line">    c_name = db.Column(db.String(<span class="number">20</span>), unique=<span class="keyword">True</span>)</span><br><span class="line">    students = db.relationship(<span class="string">'Student'</span>,</span><br><span class="line">                               secondary=sc,</span><br><span class="line">                               backref=<span class="string">'cou'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, name)</span>:</span></span><br><span class="line">        self.c_name = name</span><br></pre></td></tr></table></figure>
<p>sc表由<strong>db.Table声明</strong>，我们不需要关心这张表，因为这张表将会由SQLAlchemy接管，它唯一的作用是作为students表和courses表关联表，所以必须在db.relationship()中指出<strong>sencondary关联表参数</strong>。lazy是指查询时的惰性求值的方式，这里有详细的参数说明，而db.backref是声明反向身份代理，其中的lazy参数是指明反向查询的惰性求值方式。</p>
<h3 id="添加学生和课程之间的关系"><a href="#添加学生和课程之间的关系" class="headerlink" title="添加学生和课程之间的关系"></a>添加学生和课程之间的关系</h3><p>通过页面中传递学生的id和课程的id，分别获取学生的对象和课程的对象，在使用关联关系append去添加学生对象，并且add以后再commit后，就可以在中间表sc中查看到新增的关联关系了。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">userid = request.form.get(<span class="string">'userid'</span>)</span><br><span class="line">courseid = request.form.get(<span class="string">'courseid'</span>)</span><br><span class="line"></span><br><span class="line">stu = Student.query.get(userid)</span><br><span class="line">cou = Course.query.get(courseid)</span><br><span class="line"></span><br><span class="line">cou.students.append(stu)</span><br><span class="line">db.session.add(cou)</span><br><span class="line">db.session.commit()</span><br></pre></td></tr></table></figure>
<h3 id="删除学生和课程之间的关系"><a href="#删除学生和课程之间的关系" class="headerlink" title="删除学生和课程之间的关系"></a>删除学生和课程之间的关系</h3><p>通过页面获取传递的学生的id和课程的id，分别获取学生对象和课程对象，在使用关联关系remove去删除学生对象，并commit将事务提交到数据库中</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">stu = Student.query.get(s_id)</span><br><span class="line">cou = Course.query.get(c_id)</span><br><span class="line"></span><br><span class="line">cou.students.remove(stu)</span><br><span class="line">db.session.commit()</span><br></pre></td></tr></table></figure>
<h3 id="通过课程查询学生的信息"><a href="#通过课程查询学生的信息" class="headerlink" title="通过课程查询学生的信息"></a>通过课程查询学生的信息</h3><p>以下定义在课程course的模型中，所以通过课程查询学生的信息，语法为课程的对象.students。如果知道学生的信息反过来找课程的信息，则使用backref的反向关联去查询，语法为学生的对象.cou(反向)</p>
<p>students = db.relationship(‘Student’,secondary=sc,backref=’cou’)</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cou = Course.query.get(<span class="number">2</span>)</span><br><span class="line">stus = cou.students</span><br></pre></td></tr></table></figure>
<h3 id="通过学生去查询课程的信息"><a href="#通过学生去查询课程的信息" class="headerlink" title="通过学生去查询课程的信息"></a>通过学生去查询课程的信息</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">stu = Student.query.get(id)</span><br><span class="line">cous = stu.cou</span><br></pre></td></tr></table></figure>
        </div>

        <blockquote class="post-copyright">
    
    <div class="content">
        
<span class="post-time">
    最后更新时间：<time datetime="2018-06-25T11:30:30.701Z" itemprop="dateUpdated">2018-06-25 19:30:30</time>
</span><br>


        
    </div>
    
    <footer>
        <a href="http://alexyanglong.github.io">
            <img src="/img/avatar.jpg" alt="AlexYang">
            AlexYang
        </a>
    </footer>
</blockquote>

        
<div class="page-reward">
    <a id="rewardBtn" href="javascript:;" class="page-reward-btn waves-effect waves-circle waves-light">赏</a>
</div>



        <div class="post-footer">
            
	<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Flask/">Flask</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Python/">Python</a></li></ul>


            
<div class="page-share-wrap">
    

<div class="page-share" id="pageShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://alexyanglong.github.io/2018/06/08/Flask----模型的关联关系/&title=《Flask -- 模型的关联关系》 — AlexYang's World&pic=http://alexyanglong.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://alexyanglong.github.io/2018/06/08/Flask----模型的关联关系/&title=《Flask -- 模型的关联关系》 — AlexYang's World&source=学习弯道超车的技巧！" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://alexyanglong.github.io/2018/06/08/Flask----模型的关联关系/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Flask -- 模型的关联关系》 — AlexYang's World&url=http://alexyanglong.github.io/2018/06/08/Flask----模型的关联关系/&via=http://alexyanglong.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://alexyanglong.github.io/2018/06/08/Flask----模型的关联关系/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>



    <a href="javascript:;" id="shareFab" class="page-share-fab waves-effect waves-circle">
        <i class="icon icon-share-alt icon-lg"></i>
    </a>
</div>



        </div>
    </div>

    
<nav class="post-nav flex-row flex-justify-between flex-row-reverse">
  

  
    <div class="waves-block waves-effect next">
      <a href="/2018/06/07/Flask----模型的使用/" id="post-next" class="post-nav-link">
        <div class="tips">Next <i class="icon icon-angle-right icon-lg icon-pl"></i></div>
        <h4 class="title">Flask -- 模型的使用</h4>
      </a>
    </div>
  
</nav>



    











    <!-- Valine Comments -->
    <div class="comments vcomment" id="comments"></div>
    <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>
    <!-- Valine Comments script -->
    <script>
        var GUEST_INFO = ['nick','mail','link'];
        var guest_info = 'nick,mail'.split(',').filter(function(item){
          return GUEST_INFO.indexOf(item) > -1
        });
        new Valine({
            el: '#comments',
            notify: 'true' == 'true',
            verify: 'false' == 'true',
            appId: "K2pQ8y8pW8SHz1EbhbJjiDWN-gzGzoHsz",
            appKey: "Auoz21hvbzMNswnM6XQw5hWV",
            avatar: "mm",
            placeholder: "快来评论吧~~~",
            guest_info: guest_info.length == 0 ? GUEST_INFO : guest_info,
            pageSize: "10"
        })
    </script>
    <!-- Valine Comments end -->







</article>

<div id="reward" class="page-modal reward-lay">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <h3 class="reward-title">
        <i class="icon icon-quote-left"></i>
        (つェ⊂)谢谢大爷~
        <i class="icon icon-quote-right"></i>
    </h3>
    <div class="reward-content">
        
        <div class="reward-code">
            <img id="rewardCode" src="/img/wechat.jpg" alt="打赏二维码">
        </div>
        
        <label class="reward-toggle">
            <input id="rewardToggle" type="checkbox" class="reward-toggle-check"
                data-wechat="/img/wechat.jpg" data-alipay="/img/alipay.jpg">
            <div class="reward-toggle-ctrol">
                <span class="reward-toggle-item wechat">微信</span>
                <span class="reward-toggle-label"></span>
                <span class="reward-toggle-item alipay">支付宝</span>
            </div>
        </label>
        
    </div>
</div>



</div>

        <footer class="footer">
    <div class="top">
        
        <p>
            
                <span><a href="/atom.xml" target="_blank" class="rss" title="rss"><i class="icon icon-lg icon-rss"></i></a></span>
            
            <span><a href="https://github.com/AlexYangLong" target="_blank" class="rss"><i class="icon icon-lg icon-github"></i></a></span>
        </p>
		
<p>
    <span id="busuanzi_container_site_uv" style='display:none'>
        站点总访客数：<span id="busuanzi_value_site_uv"></span>
    </span>
    <span id="busuanzi_container_site_pv" style='display:none'>
        站点总访问量：<span id="busuanzi_value_site_pv"></span>
    </span>
</p>


    </div>
    <div class="bottom">
        <p>
			<span>AlexYang &copy; 2018</span>
			<span> AlexYangLong.github.io </span>
		<p>
			<span>
                
                Power by <a href="http://hexo.io/" target="_blank">Hexo</a> Theme <a href="https://github.com/yscoder/hexo-theme-indigo" target="_blank">indigo</a>
            </span>
        </p>
    </div>
</footer>

    </main>
    <div class="mask" id="mask"></div>
<a href="javascript:;" id="gotop" class="waves-effect waves-circle waves-light"><span class="icon icon-lg icon-chevron-up"></span></a>



<div class="global-share" id="globalShare">
    <ul class="reset share-icons">
      <li>
        <a class="weibo share-sns" target="_blank" href="http://service.weibo.com/share/share.php?url=http://alexyanglong.github.io/2018/06/08/Flask----模型的关联关系/&title=《Flask -- 模型的关联关系》 — AlexYang's World&pic=http://alexyanglong.github.io/img/avatar.jpg" data-title="微博">
          <i class="icon icon-weibo"></i>
        </a>
      </li>
      <li>
        <a class="weixin share-sns wxFab" href="javascript:;" data-title="微信">
          <i class="icon icon-weixin"></i>
        </a>
      </li>
      <li>
        <a class="qq share-sns" target="_blank" href="http://connect.qq.com/widget/shareqq/index.html?url=http://alexyanglong.github.io/2018/06/08/Flask----模型的关联关系/&title=《Flask -- 模型的关联关系》 — AlexYang's World&source=学习弯道超车的技巧！" data-title=" QQ">
          <i class="icon icon-qq"></i>
        </a>
      </li>
      <li>
        <a class="facebook share-sns" target="_blank" href="https://www.facebook.com/sharer/sharer.php?u=http://alexyanglong.github.io/2018/06/08/Flask----模型的关联关系/" data-title=" Facebook">
          <i class="icon icon-facebook"></i>
        </a>
      </li>
      <li>
        <a class="twitter share-sns" target="_blank" href="https://twitter.com/intent/tweet?text=《Flask -- 模型的关联关系》 — AlexYang's World&url=http://alexyanglong.github.io/2018/06/08/Flask----模型的关联关系/&via=http://alexyanglong.github.io" data-title=" Twitter">
          <i class="icon icon-twitter"></i>
        </a>
      </li>
      <li>
        <a class="google share-sns" target="_blank" href="https://plus.google.com/share?url=http://alexyanglong.github.io/2018/06/08/Flask----模型的关联关系/" data-title=" Google+">
          <i class="icon icon-google-plus"></i>
        </a>
      </li>
    </ul>
 </div>


<div class="page-modal wx-share" id="wxShare">
    <a class="close" href="javascript:;"><i class="icon icon-close"></i></a>
    <p>扫一扫，分享到微信</p>
    <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACtklEQVR42u3a0Y7bMAwEwPz/T19fW7Tx7ZJSmwLjp8BxZI0OkHgkX6/4+npz/fxt8vn5zrv3/v758IWHh4d3aOrvppI8k/DyXz2P9m4+eHh4eLd5yab8vJUnL2sXsT0k8PDw8D6T9+5XsyNhtqx4eHh4/yPvebvPkwt5ugEPDw/v03h5ojZPy7bBd3vwHM614OHh4cW8vIr0OZ+v1Pfw8PDw1lX15Jpt3HkLwmpueHh4eBd4sxTt8/22uJWnOYaBNR4eHt4FXjLdTYkrAczKXc8LgYeHh3eDtyn/J6T8/mY5jv2t8PDw8Na8GXhWJGt/mwTWeHh4eDd4efibpwySyD1f1lNvxMPDwzv1xk1ZK0/dzkL5PLx++0Y8PDy8C7wWkGPaQDlPN7RhPR4eHt4N3iaorV8zGnnW2oWHh4f3N3mz0Hlf9GoTJXlzGB4eHt4N3ux4aDHt/TZkfyVTxMPDw1vwkoTCJiG7Cb6L5qrnLAseHh7eUV4bKCfbdN4aNQugayoeHh7eBV4y9Cb43pS78lC7KIPh4eHhLXiz8LdtHcjHbMP9oicCDw8P7wKvLibFgXWSdJgF9HW7AB4eHt4hXn4A5M0E7VZ+9sj5JaTGw8PDO8rbFL1mTVqzBEfbgIWHh4d3j5cfBjN2uyizBq/iPwY8PDy8NS8/GDbFsBuwIoGCh4eHd5SXPFonT+NkxD6k/oaNh4eHd4GXl+rzlqzZt/khNFxEPDw8vEO8r/Jqt/j9OLPFjSaBh4eHN+K1m2/bapCfS7MAfbZMeHh4eHteW/SKWp1GC5eHy8W78PDw8K7x2qFPpXdncytCbTw8PLx/ykueb4tYbeNXPj4eHh7eJ/CSItlmgZKNvk7g4uHh4V3jtUFzsunv07jtTP4wDh4eHt4FXpsUOJtK2DcKHKvv4eHh4X3/zA8ZnQMnAni05wAAAABJRU5ErkJggg==" alt="微信分享二维码">
</div>




    <script src="//cdn.bootcss.com/node-waves/0.7.4/waves.min.js"></script>
<script>
var BLOG = { ROOT: '/', SHARE: true, REWARD: true };


</script>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/main.min.js"></script>


<div class="search-panel" id="search-panel">
    <ul class="search-result" id="search-result"></ul>
</div>
<template id="search-tpl">
<li class="item">
    <a href="{path}" class="waves-block waves-effect">
        <div class="title ellipsis" title="{title}">{title}</div>
        <div class="flex-row flex-middle">
            <div class="tags ellipsis">
                {tags}
            </div>
            <time class="flex-col time">{date}</time>
        </div>
    </a>
</li>
</template>

<script src="//unpkg.com/hexo-theme-material-indigo@latest/js/search.min.js" async></script>






<script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



<script>
(function() {
    var OriginTitile = document.title, titleTime;
    document.addEventListener('visibilitychange', function() {
        if (document.hidden) {
            document.title = '欢迎来到Alex的世界！';
            clearTimeout(titleTime);
        } else {
            document.title = '(つェ⊂)咦!又好了!';
            titleTime = setTimeout(function() {
                document.title = OriginTitile;
            },2000);
        }
    });
})();
</script>



</body>
</html>
